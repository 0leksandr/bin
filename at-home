#!/bin/bash
exit 1  #TODO: remove
set -e
extra_checks="$1"

if [ "$extra_checks" ]; then
    # if wmctrl -l |grep Zoom > /dev/null; then
    #     exit 1
    # fi

    if [ "$(mic-status)" = "on" ]; then
        exit 1
    fi

    # # if anything is in fullscreen
    # cur_workspace="$(wmctrl -d |grep -E '^[0-9]+ +\*')"
    # cur_workspace_id="$(echo "$cur_workspace" |sed -r 's/^([0-9]+) .*$/\1/')"
    # cur_workspace_dim="$(echo "$cur_workspace" |sed -r 's/^[0-9]+ +[-*]+ DG: ([0-9]+)x([0-9]+) .*$/\1 \2/')"
    # if wmctrl -l -G |grep -E "^[^ ]+ +$cur_workspace_id +[0-9]+ +[0-9]+ +$cur_workspace_dim " > /dev/null; then
    #     exit 1
    # fi

    if _external-display-connected; then
        exit 1
    fi
fi

for i in {1..10}; do  # bash
    if connected7 1 >/dev/null; then
        if [ "$(iwgetid -r)" = "TP-LINK_7DA0" ]; then
            exit 0
        else
            exit 1
        fi
    else
        sleep 1
    fi
done

exit 1

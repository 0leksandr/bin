#!/bin/sh
set -e

# git add .
# # git add -u
# # git add -u -- .
# git commit -a -m "$@"

flags="$1"
eval "git add $(_path 2 "$@")"

reg="^origin( |\t)+git@github\.com:([^/]+)/[^/ ]+ \(push\)$"
for remote_repo in $(git remote -v |grep -E "$reg" |sed -r "s~$reg~\2~"); do
    if [ "$remote_repo" = "MacPaw" ]; then
        flags="--gpg-sign $flags"
        break
    fi
done

eval "git commit $flags"  # `git commit -m "$1"` does not work
